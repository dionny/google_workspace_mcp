# Pytest configuration for Google Workspace MCP tests

[tool.pytest.ini_options]
# Test discovery patterns
python_files = ["test_*.py", "*_test.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]

# Markers for categorizing tests
markers = [
    "unit: Unit tests with mocks (fast)",
    "integration: Integration tests with real API calls (slow)",
    "asyncio: Tests that use asyncio",
]

# Test paths
testpaths = ["tests"]

# Asyncio configuration
asyncio_mode = "auto"

# Output options
console_output_style = "progress"
addopts = """
    -v
    --tb=short
    --strict-markers
    --disable-warnings
"""

# Logging
log_cli = false
log_cli_level = "INFO"
log_cli_format = "%(asctime)s [%(levelname)8s] %(message)s"
log_cli_date_format = "%Y-%m-%d %H:%M:%S"

# Coverage options (if using pytest-cov)
[tool.coverage.run]
source = ["gdocs", "gdrive", "gcalendar", "gmail", "gsheets", "gslides", "gtasks"]
omit = ["*/tests/*", "*/test_*.py"]

[tool.coverage.report]
precision = 2
show_missing = true
skip_covered = false

[dependency-groups]
dev = [
    "pytest>=9.0.2",
    "pytest-asyncio>=1.3.0",
]
